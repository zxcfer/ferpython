---
layout: post
title: PHP PDO cheat sheet
tags: ["php", "pdo"]
---

## PDO Connection

```php
try {
    $dsn = "mysql:host=localhost;dbname=$dbname";
    $dbh = new PDO($dsn, $user, $password);
} catch (PDOException $e){
    echo $e->getMessage();
}
```

In postgreSQL, sequences are created when you are using the SERIAL data type.

```sql
CREATE TABLE ingredients (
  id         SERIAL PRIMARY KEY,
  name       varchar(255) NOT NULL,
);
```

So the sequence name will be ingredients_id_seq

```php
$db->lastInsertId('ingredients_id_seq');

// count rows
$nRows = $pdo->query('select count(*) from blah')->fetchColumn(0);
echo $nRows;
```